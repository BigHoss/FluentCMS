@using FluentCMS.Entities
@using System.Linq
Section name: @Name, Page: @Page?.Title
@foreach (var plugin in Page.Plugins.Where(x => x.Section.ToLower() == Name.ToLower()).OrderBy(x => x.Order))
{
    <DynamicComponent Type=@GetType(plugin) />
}
@code {
    [Parameter]
    public string Name { get; set; } = string.Empty;

    [CascadingParameter(Name ="Page")]
    public PageResponse? Page { get; set; } = default!;

    private Type? GetType(PluginResponse plugin)
    {
        var assembly = typeof(Section).Assembly;
        var typeInfo = assembly.DefinedTypes.FirstOrDefault(x => x.Name == plugin.Definition.ViewType);
        return typeInfo?.AsType();
    }
}
